(()=>{"use strict";const e=[[6,null,2],[3,4,8],[7,1,5]],t=[{x:0,y:-1,name:"⇐"},{x:-1,y:0,name:"⇑"},{x:0,y:1,name:"⇒"},{x:1,y:0,name:"⇓"}],o=(e,t,o=!0)=>{console.log(`Index of the state ${t}`);let n="";for(let t of e){const e=t.map((e=>e||" "));n+="-------------\n",n+=`| ${e[0]} | ${e[1]} | ${e[2]} |\n`}return n+="-------------\n",o&&console.log(n),n},n=e=>{let t={x:0,y:0,name:"empty"};e:for(let o=0;o<e[0].length;++o)for(let n=0;n<e.length;++n)if(null===e[o][n]){t.x=o,t.y=n;break e}return t},l=e=>e.x>=3||e.x<0||e.y>=3||e.y<0;class s{constructor(e,t,n,l,s){this.getState=()=>this.state,this.getMoves=()=>this.operator,this.getDepth=()=>this.depth,this.pathFromStart=()=>{let e=[],t=[],n=this;do{e.push(n?.getState()),t.push(n?.getMoves()),n=n?.parent,n.parent||e.push(n?.getState())}while(0!==n?.getDepth());e.reverse(),t.reverse();let l=1;for(const t of e)o(t,l),l++;return console.log(`Кількість переміщень: ${t.length}`),console.log(`Переміщення по порядку: ${t.join(", ")}\n`),t},this.state=e,this.parent=t,this.operator=n,this.depth=l,this.cost=s}}let r={currentState:null,moves:0,settled:0,dropped:0,depth:0,haveSolution:!1};(()=>{let a=[{state:e,index:1}];{const e=document.querySelector(".next"),i=document.querySelector(".result"),c=document.querySelector(".find");e.setAttribute("disabled","true"),i.setAttribute("disabled","true");const d=document.getElementById("results");let h=0;e?.addEventListener("click",(()=>{const e=document.createElement("table");e.className+="table table-primary table-hover table-bordered table-sm align-middle caption-top",e.style.width="200px",e.style.height="200px",e.style.textAlign="center",e.insertAdjacentHTML("afterbegin",`\n               <caption class="fw-bold text-primary">Index of the state is ${a[h].index}</caption>\n            `);const t=document.createElement("tbody");for(let e of a[h].state){const o=t.insertRow();for(let t of e){const e=o.insertCell();e.classList.add("align-middle"),e.innerHTML=t?String(t):" "}}e.appendChild(t),d?.appendChild(e),d.scrollTop=d.scrollHeight,o(a[h].state,a[h].index),h++})),i?.addEventListener("click",(()=>{r.haveSolution?(console.log("Порядок переміщень для розв'язку гри в 8 :"),r?.currentState?.pathFromStart(),console.log(`Кількість відвіданих станів : ${r.moves}`),console.log(`Кількість станів занесених у БД : ${r.settled} `),console.log(`Кількість відкинутих станів : ${r.dropped}`),console.log(`Глибина дерева пошуку на якій знайдено рішення : ${r.depth}`)):(console.log(`Кількість відвіданих станів : ${r.moves}`),console.log(`Кількість станів занесених у БД : ${r.settled} `),console.log(`Кількість відкинутих станів : ${r.dropped}`),console.log("Гра у 8 немає розв'язків"))})),c?.addEventListener("click",(()=>{const o=e=>{const t=[];for(let o of e.rows){const e=[];for(let t of o.cells){const o=parseInt(t.innerHTML);Number.isNaN(o)?e.push(null):e.push(o)}t.push(e)}return t},c=document.querySelector(".initial-state"),u=document.querySelector(".final-state"),p=o(c),g=o(u),m=[{state:p,index:1}];h=0,d.innerHTML=null,a=function(e,o,a){const i=new Map;i.set(e.toString(),!0);const c=[new s(e,null,null,0,0)];let d=0,h=0;for(;c.length;){let e=c.shift();if(r={currentState:e,moves:d,settled:i.size,dropped:h,depth:e.getDepth(),haveSolution:!1},u=o,e.getState()?.toString()===u?.toString())return r.haveSolution=!0,a;const p=n(e.getState());t.forEach((t=>{const o=e?.getState()?.map((e=>[...e])),n={x:p.x+t.x,y:p.y+t.y,name:t.name};l(n)||([o[p.x][p.y],o[n.x][n.y]]=[o[n.x][n.y],o[p.x][p.y]],i.get(o.toString())?h++:(c.push(new s(o,e,t.name,e.getDepth()+1,0)),i.set(o.toString(),!0),a.push({state:o,index:d+2})),d++)}))}var u;return a}(p,g,m),e.disabled=!1,i.disabled=!1}))}})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNVSxFQUFZcEYsRUFBa0IwQixFQUFhWCxZQUNqRDlCLEVBQVdvRyxTQUFTQyxJQUNoQixNQUFNQyxFQUFZN0QsR0FDWlgsWUFDQWpCLEtBQUtGLEdBQVEsSUFBSUEsS0FFakJXLEVBQVMsQ0FDWHJCLEVBQUdrRyxFQUFVbEcsRUFBSW9HLEVBQVVwRyxFQUMzQkMsRUFBR2lHLEVBQVVqRyxFQUFJbUcsRUFBVW5HLEVBQzNCQyxLQUFNa0csRUFBVWxHLE1BR2ZrQixFQUFjQyxNQUdYZ0YsRUFBVUgsRUFBVWxHLEdBQUdrRyxFQUFVakcsR0FDakNvRyxFQUFVaEYsRUFBT3JCLEdBQUdxQixFQUFPcEIsSUFDM0IsQ0FDQW9HLEVBQVVoRixFQUFPckIsR0FBR3FCLEVBQU9wQixHQUMzQm9HLEVBQVVILEVBQVVsRyxHQUFHa0csRUFBVWpHLElBR2hDd0YsRUFBR2EsSUFBSUQsRUFBVVQsWUFNbEJFLEtBTEFELEVBQU16RCxLQUFLLElBQUlkLEVBQUsrRSxFQUFXN0QsRUFBYzRELEVBQVVsRyxLQUFNc0MsRUFBYVQsV0FBYSxFQUFHLElBQzFGMEQsRUFBR0UsSUFBSVUsRUFBVVQsWUFBWSxHQUM3QkosRUFBT3BELEtBQUssQ0FBRWhDLE1BQU9pRyxFQUFXaEcsTUFBT29DLEVBQVEsS0FLbkRBLElBQ0osR0FFUixDRjVDMEIsSUFBUXdELEVFOENsQyxPQUFPVCxDQUNYLENBdUV3QmUsQ0FBSWpCLEVBQVNDLEVBQU9DLEdBQ2hDMUMsRUFBZ0IwRCxVQUFXLEVBQzNCdkQsRUFBYXVELFVBQVcsQ0FBSyxHQUVyQyxDQVFILEVBbEZELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sYWIxLy4vc3JjL2NvbnN0YW50cy50cyIsIndlYnBhY2s6Ly9sYWIxLy4vc3JjL2hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vbGFiMS8uL3NyYy9ub2RlLnRzIiwid2VicGFjazovL2xhYjEvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXhwb3J0IGNvbnN0IGluaXRpYWxTdGF0ZSA9IFtcclxuLy8gICAgWzUsIDYsIDddLFxyXG4vLyAgICBbOCwgMSwgMl0sXHJcbi8vICAgIFszLCA0LCBudWxsXSxcclxuLy8gXTtcclxuLy8gZXhwb3J0IGNvbnN0IGluaXRpYWxTdGF0ZSA9IFtcclxuLy8gICBbMywgMSwgMl0sXHJcbi8vICAgWzQsIDUsIG51bGxdLFxyXG4vLyAgIFs3LCA4LCA2XSxcclxuLy8gXTtcclxuZXhwb3J0IGNvbnN0IGluaXRpYWxTdGF0ZSA9IFtcclxuICAgIFs2LCBudWxsLCAyXSxcclxuICAgIFszLCA0LCA4XSxcclxuICAgIFs3LCAxLCA1XSxcclxuXTtcclxuZXhwb3J0IGNvbnN0IGZpbmFsU3RhdGUgPSBbXHJcbiAgICBbMSwgMiwgM10sXHJcbiAgICBbNCwgNSwgNl0sXHJcbiAgICBbNywgOCwgbnVsbF0sXHJcbl07XHJcbmV4cG9ydCBjb25zdCBkaXJlY3Rpb25zID0gW1xyXG4gICAgeyB4OiAwLCB5OiAtMSwgbmFtZTogXCLih5BcIiB9LFxyXG4gICAgeyB4OiAtMSwgeTogMCwgbmFtZTogXCLih5FcIiB9LFxyXG4gICAgeyB4OiAwLCB5OiAxLCBuYW1lOiBcIuKHklwiIH0sXHJcbiAgICB7IHg6IDEsIHk6IDAsIG5hbWU6IFwi4oeTXCIgfSxcclxuXTtcclxuZXhwb3J0IGNvbnN0IHNpemUgPSAzO1xyXG5leHBvcnQgY29uc3QgcHJvZHVjdGlvbiA9IHRydWU7XHJcbiIsImltcG9ydCB7IHNpemUgfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcclxuZXhwb3J0IGZ1bmN0aW9uKiBnZXRFeGVjdXRpb25UaW1lKCkge1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKTtcclxuICAgIHlpZWxkIDE7XHJcbiAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGRpZmYgPSBuZXcgRGF0ZShlbmRUaW1lIC0gc3RhcnRUaW1lKTtcclxuICAgIGNvbnN0IGV4ZWN1dGlvbiA9IGRpZmYuZ2V0U2Vjb25kcygpICsgMC4wMDEgKiBkaWZmLmdldE1pbGxpc2Vjb25kcygpO1xyXG4gICAgY29uc29sZS5sb2coYEV4ZWN1dGlvbiB0aW1lOiAke2V4ZWN1dGlvbn0gc2Vjb25kc2ApO1xyXG59XHJcbmV4cG9ydCBjb25zdCBkaXNwbGF5Qm9hcmQgPSAoc3RhdGUsIGluZGV4LCBkZWJ1ZyA9IHRydWUpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBJbmRleCBvZiB0aGUgc3RhdGUgJHtpbmRleH1gKTtcclxuICAgIGxldCBkaXNwbGF5ID0gXCJcIjtcclxuICAgIGZvciAobGV0IHJvdyBvZiBzdGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IGNlbGxzID0gcm93Lm1hcCgoaXRlbSkgPT4gKCFpdGVtID8gXCIgXCIgOiBpdGVtKSk7XHJcbiAgICAgICAgZGlzcGxheSArPSBcIi0tLS0tLS0tLS0tLS1cXG5cIjtcclxuICAgICAgICBkaXNwbGF5ICs9IGB8ICR7Y2VsbHNbMF19IHwgJHtjZWxsc1sxXX0gfCAke2NlbGxzWzJdfSB8XFxuYDtcclxuICAgIH1cclxuICAgIGRpc3BsYXkgKz0gXCItLS0tLS0tLS0tLS0tXFxuXCI7XHJcbiAgICBpZiAoZGVidWcpXHJcbiAgICAgICAgY29uc29sZS5sb2coZGlzcGxheSk7XHJcbiAgICByZXR1cm4gZGlzcGxheTtcclxufTtcclxuZXhwb3J0IGNvbnN0IGdldEVtcHlDZWxsQ29vcmRzID0gKHN0YXRlKSA9PiB7XHJcbiAgICBsZXQgY29vcmRpbmF0ZXMgPSB7IHg6IDAsIHk6IDAsIG5hbWU6IFwiZW1wdHlcIiB9O1xyXG4gICAgb3V0ZXI6IGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGVbMF0ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHN0YXRlLmxlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZVtpXVtqXSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXMueCA9IGk7XHJcbiAgICAgICAgICAgICAgICBjb29yZGluYXRlcy55ID0gajtcclxuICAgICAgICAgICAgICAgIGJyZWFrIG91dGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xyXG59O1xyXG5leHBvcnQgY29uc3Qgc3RhdGVzQXJlRXF1YWwgPSAoc3RhdGUsIHNlY29uZFN0YXRlKSA9PiB7XHJcbiAgICByZXR1cm4gc3RhdGU/LnRvU3RyaW5nKCkgPT09IHNlY29uZFN0YXRlPy50b1N0cmluZygpO1xyXG59O1xyXG5leHBvcnQgY29uc3QgaXNPdXRPZkJvcmRlciA9IChjb29yZHMpID0+IHtcclxuICAgIGlmIChjb29yZHMueCA+PSBzaXplIHx8IGNvb3Jkcy54IDwgMClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGlmIChjb29yZHMueSA+PSBzaXplIHx8IGNvb3Jkcy55IDwgMClcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuIiwiaW1wb3J0IHsgZGlzcGxheUJvYXJkIH0gZnJvbSBcIi4vaGVscGVyc1wiO1xyXG5leHBvcnQgY2xhc3MgTm9kZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSwgcGFyZW50LCBvcGVyYXRvciwgZGVwdGgsIGNvc3QpIHtcclxuICAgICAgICB0aGlzLmdldFN0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZ2V0TW92ZXMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wZXJhdG9yO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5nZXREZXB0aCA9ICgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVwdGg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnBhdGhGcm9tU3RhcnQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzdGF0ZUxpc3QgPSBbXTtcclxuICAgICAgICAgICAgbGV0IG1vdmVMaXN0ID0gW107XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50Tm9kZSA9IHRoaXM7XHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlTGlzdC5wdXNoKGN1cnJlbnROb2RlPy5nZXRTdGF0ZSgpKTtcclxuICAgICAgICAgICAgICAgIG1vdmVMaXN0LnB1c2goY3VycmVudE5vZGU/LmdldE1vdmVzKCkpO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudE5vZGUgPSBjdXJyZW50Tm9kZT8ucGFyZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50Tm9kZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZUxpc3QucHVzaChjdXJyZW50Tm9kZT8uZ2V0U3RhdGUoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gd2hpbGUgKGN1cnJlbnROb2RlPy5nZXREZXB0aCgpICE9PSAwKTtcclxuICAgICAgICAgICAgc3RhdGVMaXN0LnJldmVyc2UoKTtcclxuICAgICAgICAgICAgbW92ZUxpc3QucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICBsZXQgaW5kZXggPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3RhdGVMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5Qm9hcmQoaXRlbSwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg0JrRltC70YzQutGW0YHRgtGMINC/0LXRgNC10LzRltGJ0LXQvdGMOiAke21vdmVMaXN0Lmxlbmd0aH1gKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYNCf0LXRgNC10LzRltGJ0LXQvdC90Y8g0L/QviDQv9C+0YDRj9C00LrRgzogJHttb3ZlTGlzdC5qb2luKFwiLCBcIil9XFxuYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBtb3ZlTGlzdDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XHJcbiAgICAgICAgdGhpcy5kZXB0aCA9IGRlcHRoO1xyXG4gICAgICAgIHRoaXMuY29zdCA9IGNvc3Q7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgZGlyZWN0aW9ucywgZmluYWxTdGF0ZSwgaW5pdGlhbFN0YXRlLCBwcm9kdWN0aW9uIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IGRpc3BsYXlCb2FyZCwgZ2V0RW1weUNlbGxDb29yZHMsIGdldEV4ZWN1dGlvblRpbWUsIGlzT3V0T2ZCb3JkZXIsIHN0YXRlc0FyZUVxdWFsLCB9IGZyb20gXCIuL2hlbHBlcnNcIjtcclxuaW1wb3J0IHsgTm9kZSB9IGZyb20gXCIuL25vZGVcIjtcclxubGV0IHJlc3VsdHMgPSB7XHJcbiAgICBjdXJyZW50U3RhdGU6IG51bGwsXHJcbiAgICBtb3ZlczogMCxcclxuICAgIHNldHRsZWQ6IDAsXHJcbiAgICBkcm9wcGVkOiAwLFxyXG4gICAgZGVwdGg6IDAsXHJcbiAgICBoYXZlU29sdXRpb246IGZhbHNlLFxyXG59O1xyXG5jb25zdCBwcmludFJlc3VsdHMgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXJlc3VsdHMuaGF2ZVNvbHV0aW9uKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCa0ZbQu9GM0LrRltGB0YLRjCDQstGW0LTQstGW0LTQsNC90LjRhSDRgdGC0LDQvdGW0LIgOiAke3Jlc3VsdHMubW92ZXN9YCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCa0ZbQu9GM0LrRltGB0YLRjCDRgdGC0LDQvdGW0LIg0LfQsNC90LXRgdC10L3QuNGFINGDINCR0JQgOiAke3Jlc3VsdHMuc2V0dGxlZH0gYCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCa0ZbQu9GM0LrRltGB0YLRjCDQstGW0LTQutC40L3Rg9GC0LjRhSDRgdGC0LDQvdGW0LIgOiAke3Jlc3VsdHMuZHJvcHBlZH1gKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcItCT0YDQsCDRgyA4INC90LXQvNCw0ZQg0YDQvtC30LIn0Y/Qt9C60ZbQslwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi0J/QvtGA0Y/QtNC+0Log0L/QtdGA0LXQvNGW0YnQtdC90Ywg0LTQu9GPINGA0L7Qt9CyJ9GP0LfQutGDINCz0YDQuCDQsiA4IDpcIik7XHJcbiAgICAgICAgcmVzdWx0cz8uY3VycmVudFN0YXRlPy5wYXRoRnJvbVN0YXJ0KCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCa0ZbQu9GM0LrRltGB0YLRjCDQstGW0LTQstGW0LTQsNC90LjRhSDRgdGC0LDQvdGW0LIgOiAke3Jlc3VsdHMubW92ZXN9YCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCa0ZbQu9GM0LrRltGB0YLRjCDRgdGC0LDQvdGW0LIg0LfQsNC90LXRgdC10L3QuNGFINGDINCR0JQgOiAke3Jlc3VsdHMuc2V0dGxlZH0gYCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCa0ZbQu9GM0LrRltGB0YLRjCDQstGW0LTQutC40L3Rg9GC0LjRhSDRgdGC0LDQvdGW0LIgOiAke3Jlc3VsdHMuZHJvcHBlZH1gKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhg0JPQu9C40LHQuNC90LAg0LTQtdGA0LXQstCwINC/0L7RiNGD0LrRgyDQvdCwINGP0LrRltC5INC30L3QsNC50LTQtdC90L4g0YDRltGI0LXQvdC90Y8gOiAke3Jlc3VsdHMuZGVwdGh9YCk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IEJGUyA9IGZ1bmN0aW9uIChpbml0aWFsLCBmaW5hbCwgc3RhdGVzKSB7XHJcbiAgICBjb25zdCBkYiA9IG5ldyBNYXAoKTtcclxuICAgIGRiLnNldChpbml0aWFsLnRvU3RyaW5nKCksIHRydWUpO1xyXG4gICAgY29uc3QgcXVldWUgPSBbbmV3IE5vZGUoaW5pdGlhbCwgbnVsbCwgbnVsbCwgMCwgMCldO1xyXG4gICAgbGV0IG1vdmVzID0gMCwgZHJvcHBlZFN0YXRlcyA9IDA7XHJcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRTdGF0ZSA9IHF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAgICAgcmVzdWx0cyA9IHtcclxuICAgICAgICAgICAgY3VycmVudFN0YXRlOiBjdXJyZW50U3RhdGUsXHJcbiAgICAgICAgICAgIG1vdmVzOiBtb3ZlcyxcclxuICAgICAgICAgICAgc2V0dGxlZDogZGIuc2l6ZSxcclxuICAgICAgICAgICAgZHJvcHBlZDogZHJvcHBlZFN0YXRlcyxcclxuICAgICAgICAgICAgZGVwdGg6IGN1cnJlbnRTdGF0ZS5nZXREZXB0aCgpLFxyXG4gICAgICAgICAgICBoYXZlU29sdXRpb246IGZhbHNlLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHN0YXRlc0FyZUVxdWFsKGN1cnJlbnRTdGF0ZS5nZXRTdGF0ZSgpLCBmaW5hbCkpIHtcclxuICAgICAgICAgICAgcmVzdWx0cy5oYXZlU29sdXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBlbXB0eUNlbGwgPSBnZXRFbXB5Q2VsbENvb3JkcyhjdXJyZW50U3RhdGUuZ2V0U3RhdGUoKSk7XHJcbiAgICAgICAgZGlyZWN0aW9ucy5mb3JFYWNoKChkaXJlY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29weVN0YXRlID0gY3VycmVudFN0YXRlXHJcbiAgICAgICAgICAgICAgICA/LmdldFN0YXRlKClcclxuICAgICAgICAgICAgICAgID8ubWFwKChyb3cpID0+IFsuLi5yb3ddKTtcclxuICAgICAgICAgICAgLy8gY29vcmRzIGNlbGwgdG8gc3dpdGNoXHJcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkcyA9IHtcclxuICAgICAgICAgICAgICAgIHg6IGVtcHR5Q2VsbC54ICsgZGlyZWN0aW9uLngsXHJcbiAgICAgICAgICAgICAgICB5OiBlbXB0eUNlbGwueSArIGRpcmVjdGlvbi55LFxyXG4gICAgICAgICAgICAgICAgbmFtZTogZGlyZWN0aW9uLm5hbWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIGlmIGNvb3JkcyBvZiBzd2FwcGVkIGNlbGwgaXMgbm90IG91dCB0aGUgYm9yZGVyIG9mIHRoZSBmaWVsZFxyXG4gICAgICAgICAgICBpZiAoIWlzT3V0T2ZCb3JkZXIoY29vcmRzKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gbW92ZSBlbXB0eSBjZWxsIGludG8gY3VycmVudCBkaXJlY3Rpb25cclxuICAgICAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICAgICBjb3B5U3RhdGVbZW1wdHlDZWxsLnhdW2VtcHR5Q2VsbC55XSxcclxuICAgICAgICAgICAgICAgICAgICBjb3B5U3RhdGVbY29vcmRzLnhdW2Nvb3Jkcy55XSxcclxuICAgICAgICAgICAgICAgIF0gPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgY29weVN0YXRlW2Nvb3Jkcy54XVtjb29yZHMueV0sXHJcbiAgICAgICAgICAgICAgICAgICAgY29weVN0YXRlW2VtcHR5Q2VsbC54XVtlbXB0eUNlbGwueV0sXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgc3dhcHBlZCBzdGF0ZSBpcyBub3QgcHJlc2VudCBpbiBkYXRhYmFzZVxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYi5nZXQoY29weVN0YXRlLnRvU3RyaW5nKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChuZXcgTm9kZShjb3B5U3RhdGUsIGN1cnJlbnRTdGF0ZSwgZGlyZWN0aW9uLm5hbWUsIGN1cnJlbnRTdGF0ZS5nZXREZXB0aCgpICsgMSwgMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRiLnNldChjb3B5U3RhdGUudG9TdHJpbmcoKSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzLnB1c2goeyBzdGF0ZTogY29weVN0YXRlLCBpbmRleDogbW92ZXMgKyAyIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcHBlZFN0YXRlcysrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbW92ZXMrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gZGlzcGxheUJvYXJkKHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0uc3RhdGUsIDExMik7XHJcbiAgICByZXR1cm4gc3RhdGVzO1xyXG59O1xyXG4oKCkgPT4ge1xyXG4gICAgbGV0IGFsbFN0YXRlcyA9IFtcclxuICAgICAgICB7IHN0YXRlOiBpbml0aWFsU3RhdGUsIGluZGV4OiAxIH0sXHJcbiAgICBdO1xyXG4gICAgaWYgKHByb2R1Y3Rpb24pIHtcclxuICAgICAgICBjb25zdCBuZXh0U3RhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5leHRcIik7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXN1bHRcIik7XHJcbiAgICAgICAgY29uc3QgZmluZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmluZFwiKTtcclxuICAgICAgICBuZXh0U3RhdGVCdXR0b24uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIHJlc3VsdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0c1dyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc3VsdHNcIik7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBuZXh0U3RhdGVCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEFkZCBuZXh0IG5ldyBzdGF0ZSB0YWJsZSB0byB0aGUgdmlld1xyXG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0YWJsZVwiKTtcclxuICAgICAgICAgICAgdGFibGUuY2xhc3NOYW1lICs9XHJcbiAgICAgICAgICAgICAgICBcInRhYmxlIHRhYmxlLXByaW1hcnkgdGFibGUtaG92ZXIgdGFibGUtYm9yZGVyZWQgdGFibGUtc20gYWxpZ24tbWlkZGxlIGNhcHRpb24tdG9wXCI7XHJcbiAgICAgICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gXCIyMDBweFwiO1xyXG4gICAgICAgICAgICB0YWJsZS5zdHlsZS5oZWlnaHQgPSBcIjIwMHB4XCI7XHJcbiAgICAgICAgICAgIHRhYmxlLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgIHRhYmxlLmluc2VydEFkamFjZW50SFRNTChcImFmdGVyYmVnaW5cIiwgYFxuICAgICAgICAgICAgICAgPGNhcHRpb24gY2xhc3M9XCJmdy1ib2xkIHRleHQtcHJpbWFyeVwiPkluZGV4IG9mIHRoZSBzdGF0ZSBpcyAke2FsbFN0YXRlc1tpbmRleF0uaW5kZXh9PC9jYXB0aW9uPlxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCByb3cgb2YgYWxsU3RhdGVzW2luZGV4XS5zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFibGVSb3cgPSB0Ym9keS5pbnNlcnRSb3coKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGNvbCBvZiByb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZCA9IHRhYmxlUm93Lmluc2VydENlbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZC5jbGFzc0xpc3QuYWRkKFwiYWxpZ24tbWlkZGxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRkLmlubmVySFRNTCA9IFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGQuaW5uZXJIVE1MID0gU3RyaW5nKGNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcclxuICAgICAgICAgICAgcmVzdWx0c1dyYXBwZXI/LmFwcGVuZENoaWxkKHRhYmxlKTtcclxuICAgICAgICAgICAgcmVzdWx0c1dyYXBwZXIuc2Nyb2xsVG9wID0gcmVzdWx0c1dyYXBwZXIuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgICAgICAvLyBwcmludCByZXN1bHRzIHRvIHRoZSBjb25zb2xlXHJcbiAgICAgICAgICAgIGRpc3BsYXlCb2FyZChhbGxTdGF0ZXNbaW5kZXhdLnN0YXRlLCBhbGxTdGF0ZXNbaW5kZXhdLmluZGV4KTtcclxuICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXN1bHRCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHByaW50UmVzdWx0cygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZpbmRCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdldFRhYmxlU3RhdGUgPSAodGFibGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByb3cgb2YgdGFibGUucm93cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlUm93ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2VsbCBvZiByb3cuY2VsbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2VsbERhdGEgPSBwYXJzZUludChjZWxsLmlubmVySFRNTCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE51bWJlci5pc05hTihjZWxsRGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc3RhdGVSb3cucHVzaChudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzdGF0ZVJvdy5wdXNoKGNlbGxEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUucHVzaChzdGF0ZVJvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGluaXRpYWxTdGF0ZVRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbml0aWFsLXN0YXRlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBmaW5hbFN0YXRlVGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZpbmFsLXN0YXRlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBpbml0aWFsID0gZ2V0VGFibGVTdGF0ZShpbml0aWFsU3RhdGVUYWJsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsID0gZ2V0VGFibGVTdGF0ZShmaW5hbFN0YXRlVGFibGUpO1xyXG4gICAgICAgICAgICAvLyByZXNldCBzdGVwIGJ5IHN0ZXAgcmVzdWx0cyBvdXRwdXRcclxuICAgICAgICAgICAgY29uc3Qgc3RhdGVzID0gW3sgc3RhdGU6IGluaXRpYWwsIGluZGV4OiAxIH1dO1xyXG4gICAgICAgICAgICBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHJlc3VsdHNXcmFwcGVyLmlubmVySFRNTCA9IG51bGw7XHJcbiAgICAgICAgICAgIGFsbFN0YXRlcyA9IEJGUyhpbml0aWFsLCBmaW5hbCwgc3RhdGVzKTtcclxuICAgICAgICAgICAgbmV4dFN0YXRlQnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHJlc3VsdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgdGltZXIgPSBnZXRFeGVjdXRpb25UaW1lKCk7XHJcbiAgICAgICAgdGltZXIubmV4dCgpO1xyXG4gICAgICAgIEJGUyhpbml0aWFsU3RhdGUsIGZpbmFsU3RhdGUsIGFsbFN0YXRlcyk7XHJcbiAgICAgICAgdGltZXIubmV4dCgpO1xyXG4gICAgICAgIHByaW50UmVzdWx0cygpO1xyXG4gICAgfVxyXG59KSgpO1xyXG4iXSwibmFtZXMiOlsiaW5pdGlhbFN0YXRlIiwiZGlyZWN0aW9ucyIsIngiLCJ5IiwibmFtZSIsImRpc3BsYXlCb2FyZCIsInN0YXRlIiwiaW5kZXgiLCJkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJkaXNwbGF5Iiwicm93IiwiY2VsbHMiLCJtYXAiLCJpdGVtIiwiZ2V0RW1weUNlbGxDb29yZHMiLCJjb29yZGluYXRlcyIsIm91dGVyIiwiaSIsImxlbmd0aCIsImoiLCJpc091dE9mQm9yZGVyIiwiY29vcmRzIiwiTm9kZSIsImNvbnN0cnVjdG9yIiwicGFyZW50Iiwib3BlcmF0b3IiLCJkZXB0aCIsImNvc3QiLCJ0aGlzIiwiZ2V0U3RhdGUiLCJnZXRNb3ZlcyIsImdldERlcHRoIiwicGF0aEZyb21TdGFydCIsInN0YXRlTGlzdCIsIm1vdmVMaXN0IiwiY3VycmVudE5vZGUiLCJwdXNoIiwicmV2ZXJzZSIsImpvaW4iLCJyZXN1bHRzIiwiY3VycmVudFN0YXRlIiwibW92ZXMiLCJzZXR0bGVkIiwiZHJvcHBlZCIsImhhdmVTb2x1dGlvbiIsImFsbFN0YXRlcyIsIm5leHRTdGF0ZUJ1dHRvbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlc3VsdEJ1dHRvbiIsImZpbmRCdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJyZXN1bHRzV3JhcHBlciIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhYmxlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInN0eWxlIiwid2lkdGgiLCJoZWlnaHQiLCJ0ZXh0QWxpZ24iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJ0Ym9keSIsInRhYmxlUm93IiwiaW5zZXJ0Um93IiwiY29sIiwidGQiLCJpbnNlcnRDZWxsIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwiU3RyaW5nIiwiYXBwZW5kQ2hpbGQiLCJzY3JvbGxUb3AiLCJzY3JvbGxIZWlnaHQiLCJnZXRUYWJsZVN0YXRlIiwicm93cyIsInN0YXRlUm93IiwiY2VsbCIsImNlbGxEYXRhIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJpc05hTiIsImluaXRpYWxTdGF0ZVRhYmxlIiwiZmluYWxTdGF0ZVRhYmxlIiwiaW5pdGlhbCIsImZpbmFsIiwic3RhdGVzIiwiZGIiLCJNYXAiLCJzZXQiLCJ0b1N0cmluZyIsInF1ZXVlIiwiZHJvcHBlZFN0YXRlcyIsInNoaWZ0Iiwic2l6ZSIsInNlY29uZFN0YXRlIiwiZW1wdHlDZWxsIiwiZm9yRWFjaCIsImRpcmVjdGlvbiIsImNvcHlTdGF0ZSIsImdldCIsIkJGUyIsImRpc2FibGVkIl0sInNvdXJjZVJvb3QiOiIifQ==